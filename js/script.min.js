document.addEventListener("DOMContentLoaded",function(e){function t(e,t){var n=new XMLHttpRequest;n.open("GET",e),n.addEventListener("load",function(){try{var e=JSON.parse(this.responseText)}catch(n){console.log("Sorry, the data has error, we'll try to get it again"),console.log(n.name),console.log(n.message)}t(e)}),n.send()}function n(e){g.innerHTML="",e.forEach(function(e){i(e)})}function i(e){var t=document.createElement("article");t.classList.add("painter");for(var n="",i=0;i<e.categories.length;i++)n+="<span>"+e.categories[i].title+"</span>";t.innerHTML='<div class="painter__wrapper"><div class="painter__logo"><div class="painter__img"><img src="img/'+e.image+'"></div></div><div class="painter__text-wrapper"><h2 class="painter__title"><a href="#">'+e.title+'</a></h2><address class="painter__address"><div class="painter__location"><svg width="10" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#pin"></use></svg><span>'+e.city+'</span></div><div class="painter__tel"><svg width="12" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#tel"></use></svg><a href="tel:'+e.telephone+'">'+e.telephone+'</a></div><div class="painter__email"><svg width="18" height="11"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#email"></use></svg><a href="mailto:'+e.email+'">'+e.email+'</a></div></address><div class="painter__text">'+e.text+'</div><div class="painter__categories">'+n+'</div></div><div class="painter__request"><a class="btn" href="#">Pyyd√§ tarjous!</a><div class="painter__projects-count"><svg width="14" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#house"></use></svg><span>'+e.NumberOfProjects+"</span></div></div></div>",g.appendChild(t)}function r(e){e.preventDefault(),o(this),v.sort(function(e,t){return t.NumberOfProjects-e.NumberOfProjects}),n(v),u()}function s(e){e.preventDefault(),o(this),v.sort(function(e,t){return e.title>t.title?1:e.title<t.title?-1:void 0}),n(v),u()}function a(e){e.preventDefault(),o(this),v.sort(function(e,t){return t.NumberOfFeedback-e.NumberOfFeedback}),n(v),u()}function o(e){for(var t=document.querySelectorAll(".sort__item"),n=0;n<t.length;n++)t[n].classList.remove("sort__item--active");e.classList.add("sort__item--active")}function l(e){e.preventDefault(),this.closest(".categories__item").classList.toggle("categories__item--active");var t=this.closest(".categories__item").getAttribute("data-cat");p.indexOf(t)==-1?p.push(t):p.splice(p.indexOf(t),1),console.log(p),c()}function c(e){document.querySelectorAll(".painter");v.forEach(function(e){if(console.log(e.categories.id),0==p.length)e.visible=!0;else{for(var t=!1,n=0;n<p.length;n++)for(var i=0;i<e.categories.length;i++)e.categories[i].id==p[n]&&(t=!0);1==t?e.visible=!0:e.visible=!1}}),u()}function d(e){e.preventDefault();var t=document.querySelector(".search__input").value.toLowerCase();v.forEach(function(e){e.title.toLowerCase().indexOf(t)!=-1?e.visible=!0:e.visible=!1}),u()}function u(){for(var e=document.querySelectorAll(".painter"),t=0;t<v.length;t++)v[t].visible?e[t].style.display="block":e[t].style.display="none"}var v=[],g=document.querySelector(".search-results__painters");t("js/data.json",function(e){var t={};t=e,v=t.data,v.forEach(function(e){e.visible=!0}),n(v)}),document.querySelector(".sort-projects").addEventListener("click",r),document.querySelector(".sort-name").addEventListener("click",s),document.querySelector(".sort-feedback").addEventListener("click",a);for(var f=document.querySelectorAll(".categories__item a"),h=0;h<f.length;h++)f[h].addEventListener("click",l);var p=[];document.querySelector(".search__input").addEventListener("change",d),document.querySelector(".search__button").addEventListener("click",d),document.querySelector(".hamburger").addEventListener("click",function(e){e.preventDefault(),this.closest(".nav").querySelector(".nav__list").classList.toggle("nav__list--shown")})}),function(e,t){"use strict";var n="img/svg-sprite.svg",i=2;if(!t.createElementNS||!t.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)return!0;var r,s,a="localStorage"in e&&null!==e.localStorage,o=function(){t.body.insertAdjacentHTML("afterbegin",s)},l=function(){t.body?o():t.addEventListener("DOMContentLoaded",o)};if(a&&localStorage.getItem("inlineSVGrev")==i&&(s=localStorage.getItem("inlineSVGdata")))return l(),!0;try{r=new XMLHttpRequest,r.open("GET",n,!0),r.onload=function(){r.status>=200&&r.status<400&&(s=r.responseText,l(),a&&(localStorage.setItem("inlineSVGdata",s),localStorage.setItem("inlineSVGrev",i)))},r.send()}catch(c){}}(window,document);